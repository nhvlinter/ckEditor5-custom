CKFinder.define(["underscore","backbone","marionette","doT"],function(_,Backbone,Marionette,doT){"use strict";return{init:function(finder){var messageModel=new Backbone.Model({message:""});var statusBarView=new Marionette.ItemView({tagName:"p",template:doT.template("{{= it.message }}"),model:messageModel,modelEvents:{change:"render"}});finder.on("page:create:Main",function(){finder.request("statusBar:create",{name:"MyStatusBar",page:"Main",label:"My Status Bar"});finder.request("statusBar:addRegion",{id:"my-status-bar-region",name:"MyStatusBar"});finder.request("statusBar:showView",{region:"my-status-bar-region",name:"MyStatusBar",view:statusBarView});finder.on("files:selected",function(evt){var selectedFiles=evt.data.files;if(!selectedFiles.length){var folder=evt.finder.request("folder:getActive");var filesCount=evt.finder.request("files:getCurrent").length;messageModel.set("message",'Folder "'+finder.util.escapeHtml(folder.get("name"))+'" contains '+filesCount+" file(s)")}else if(selectedFiles.length===1){messageModel.set("message","Selected: "+finder.util.escapeHtml(selectedFiles.at(0).get("name")))}else{messageModel.set("message","Selected "+selectedFiles.length+" files")}});finder.on("folder:getFiles:after",function(evt){var filesCount=evt.finder.request("files:getCurrent").length;messageModel.set("message",'Folder "'+finder.util.escapeHtml(evt.data.folder.get("name"))+'" contains '+filesCount+" file(s)")})});this.addCss("#my-status-bar-region {padding: 0 1em;font-size:0.8em;font-weight:normal}")}}});